# Maintainer: reza-ygb <reza-ygb@users.noreply.github.com>

pkgname=apex-launcher-bin
pkgver=1.0.2
pkgrel=1
pkgdesc="The fastest, lightest, most reliable application launcher for Linux"
arch=('any')
url="https://github.com/reza-ygb/apex-launcher"
license=('MIT')
depends=('python' 'python-pyqt5' 'python-pillow')
optdepends=(
    'python-pyqt5: GUI mode support'
    'python-pillow: Enhanced icon support'
)
provides=('apex-launcher')
conflicts=('apex-launcher' 'apex-launcher-git')
source=("https://github.com/reza-ygb/apex-launcher/archive/v${pkgver}.tar.gz")
sha256sums=('SKIP')  # Will be updated when we create the actual release
install=apex-launcher.install

package() {
    cd "${srcdir}/apex-launcher-${pkgver}"
    
    # Create directories
    install -dm755 "${pkgdir}/usr/share/apex-launcher"
    install -dm755 "${pkgdir}/usr/bin"
    install -dm755 "${pkgdir}/usr/share/applications"
    install -dm755 "${pkgdir}/usr/share/pixmaps"
    install -dm755 "${pkgdir}/usr/share/licenses/${pkgname}"
    
    # Install main application files
    install -Dm644 apex_launcher.py "${pkgdir}/usr/share/apex-launcher/apex_launcher.py"
    install -Dm644 smart_cli_launcher.py "${pkgdir}/usr/share/apex-launcher/smart_cli_launcher.py"
    install -Dm644 requirements.txt "${pkgdir}/usr/share/apex-launcher/requirements.txt"
    install -Dm644 VERSION "${pkgdir}/usr/share/apex-launcher/VERSION"
    
    # Install launcher script
    install -Dm755 bin/apex-launcher "${pkgdir}/usr/bin/apex-launcher"
    
    # Install desktop entry and icon
    install -Dm644 apex-launcher.desktop "${pkgdir}/usr/share/applications/apex-launcher.desktop"
    install -Dm644 apex-launcher.png "${pkgdir}/usr/share/pixmaps/apex-launcher.png"
    
    # Install license
    install -Dm644 LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
    
    # Fix permissions
    chmod +x "${pkgdir}/usr/bin/apex-launcher"
}